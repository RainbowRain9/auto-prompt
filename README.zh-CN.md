# AI æç¤ºè¯ä¼˜åŒ–å¹³å°

<div align="center">

![AI Prompt Optimizer](https://img.shields.io/badge/AI-Prompt%20Optimizer-blue?style=for-the-badge&logo=openai)
![License](https://img.shields.io/badge/License-LGPL-green?style=for-the-badge)
![.NET](https://img.shields.io/badge/.NET-9.0-purple?style=for-the-badge&logo=dotnet)
![React](https://img.shields.io/badge/React-19.1.0-blue?style=for-the-badge&logo=react)

**ä¸“ä¸šçš„AIæç¤ºè¯ä¼˜åŒ–ã€è°ƒè¯•å’Œåˆ†äº«å¹³å°**

[ğŸš€ å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [ğŸ“– åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [ğŸ› ï¸ æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ) â€¢ [ğŸ“¦ éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—) â€¢ [ğŸ¤ è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)

</div>

---

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

AI æç¤ºè¯ä¼˜åŒ–å¹³å°æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æç¤ºè¯å·¥ç¨‹å·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·ä¼˜åŒ–AIæ¨¡å‹çš„æç¤ºè¯ï¼Œæå‡AIå¯¹è¯æ•ˆæœå’Œå“åº”å‡†ç¡®æ€§ã€‚å¹³å°é›†æˆäº†æ™ºèƒ½ä¼˜åŒ–ç®—æ³•ã€æ·±åº¦æ¨ç†åˆ†æã€å¯è§†åŒ–è°ƒè¯•å·¥å…·å’Œç¤¾åŒºåˆ†äº«åŠŸèƒ½ï¼Œä¸ºAIåº”ç”¨å¼€å‘è€…å’Œå†…å®¹åˆ›ä½œè€…æä¾›å…¨æ–¹ä½çš„æç¤ºè¯ä¼˜åŒ–è§£å†³æ–¹æ¡ˆã€‚

### ğŸ¯ æ ¸å¿ƒä»·å€¼

- **æ™ºèƒ½ä¼˜åŒ–**: åŸºäºå…ˆè¿›çš„AIç®—æ³•ï¼Œè‡ªåŠ¨åˆ†æå’Œä¼˜åŒ–æç¤ºè¯ç»“æ„
- **æ·±åº¦æ¨ç†**: æä¾›å¤šç»´åº¦æ€è€ƒåˆ†æï¼Œæ·±å…¥ç†è§£ç”¨æˆ·éœ€æ±‚
- **ç¤¾åŒºåˆ†äº«**: å‘ç°å’Œåˆ†äº«ä¼˜è´¨æç¤ºè¯æ¨¡æ¿ï¼Œä¸ç¤¾åŒºç”¨æˆ·äº¤æµç»éªŒ
- **å¯è§†åŒ–è°ƒè¯•**: å¼ºå¤§çš„è°ƒè¯•ç¯å¢ƒï¼Œå®æ—¶é¢„è§ˆæç¤ºè¯æ•ˆæœ

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ§  æ™ºèƒ½æç¤ºè¯ä¼˜åŒ–

- **è‡ªåŠ¨ç»“æ„åˆ†æ**: æ·±åº¦åˆ†ææç¤ºè¯çš„è¯­ä¹‰ç»“æ„å’Œé€»è¾‘å…³ç³»
- **å¤šç»´åº¦ä¼˜åŒ–**: ä»æ¸…æ™°åº¦ã€å‡†ç¡®æ€§ã€å®Œæ•´æ€§ç­‰å¤šä¸ªç»´åº¦è¿›è¡Œä¼˜åŒ–
- **æ·±åº¦æ¨ç†æ¨¡å¼**: å¯ç”¨AIæ·±åº¦æ€è€ƒï¼Œæä¾›è¯¦ç»†çš„åˆ†æè¿‡ç¨‹
- **å®æ—¶ç”Ÿæˆ**: æµå¼è¾“å‡ºä¼˜åŒ–ç»“æœï¼Œå®æ—¶æŸ¥çœ‹ç”Ÿæˆè¿‡ç¨‹

### ğŸ“š æç¤ºè¯æ¨¡æ¿ç®¡ç†

- **æ¨¡æ¿åˆ›å»º**: å°†ä¼˜åŒ–åçš„æç¤ºè¯ä¿å­˜ä¸ºå¯å¤ç”¨æ¨¡æ¿
- **æ ‡ç­¾åˆ†ç±»**: æ”¯æŒå¤šæ ‡ç­¾åˆ†ç±»ç®¡ç†ï¼Œä¾¿äºæŸ¥æ‰¾å’Œç»„ç»‡
- **æ”¶è—åŠŸèƒ½**: æ”¶è—å–œæ¬¢çš„æ¨¡æ¿ï¼Œå¿«é€Ÿè®¿é—®å¸¸ç”¨æç¤ºè¯
- **ä½¿ç”¨ç»Ÿè®¡**: è·Ÿè¸ªæ¨¡æ¿ä½¿ç”¨æƒ…å†µå’Œæ•ˆæœåé¦ˆ

### ğŸŒ ç¤¾åŒºåˆ†äº«å¹³å°

- **å…¬å¼€åˆ†äº«**: å°†ä¼˜è´¨æ¨¡æ¿åˆ†äº«ç»™ç¤¾åŒºç”¨æˆ·
- **çƒ­åº¦æ’è¡Œ**: æŒ‰æŸ¥çœ‹æ•°ã€ç‚¹èµæ•°ç­‰ç»´åº¦å±•ç¤ºçƒ­é—¨æ¨¡æ¿
- **æœç´¢å‘ç°**: å¼ºå¤§çš„æœç´¢åŠŸèƒ½ï¼Œå¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„æ¨¡æ¿
- **äº’åŠ¨äº¤æµ**: ç‚¹èµã€è¯„è®ºã€æ”¶è—ç­‰ç¤¾äº¤åŠŸèƒ½

### ğŸ”§ è°ƒè¯•ä¸æµ‹è¯•å·¥å…·

- **å¯è§†åŒ–ç•Œé¢**: ç›´è§‚çš„ç”¨æˆ·ç•Œé¢ï¼Œç®€åŒ–æ“ä½œæµç¨‹
- **å®æ—¶é¢„è§ˆ**: å³æ—¶æŸ¥çœ‹æç¤ºè¯ä¼˜åŒ–æ•ˆæœ
- **å†å²è®°å½•**: ä¿å­˜ä¼˜åŒ–å†å²ï¼Œæ”¯æŒç‰ˆæœ¬å¯¹æ¯”
- **å¯¼å‡ºåŠŸèƒ½**: æ”¯æŒå¤šç§æ ¼å¼å¯¼å‡ºä¼˜åŒ–ç»“æœ

### ğŸŒ å¤šè¯­è¨€æ”¯æŒ

- **è¯­è¨€åˆ‡æ¢**: æ”¯æŒä¸­è‹±æ–‡ç•Œé¢åˆ‡æ¢
- **å®æ—¶ç¿»è¯‘**: æ— éœ€åˆ·æ–°é¡µé¢å³å¯åˆ‡æ¢è¯­è¨€
- **æœ¬åœ°åŒ–å†…å®¹**: æ‰€æœ‰ç•Œé¢å…ƒç´ å®Œå…¨æœ¬åœ°åŒ–
- **æµè§ˆå™¨æ£€æµ‹**: æ ¹æ®æµè§ˆå™¨è®¾ç½®è‡ªåŠ¨æ£€æµ‹è¯­è¨€

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯

- **æ¡†æ¶**: .NET 9.0 + ASP.NET Core
- **AIå¼•æ“**: Microsoft Semantic Kernel 1.54.0
- **æ•°æ®åº“**: PostgreSQL + Entity Framework Core
- **è®¤è¯**: JWT Token è®¤è¯
- **æ—¥å¿—**: Serilog ç»“æ„åŒ–æ—¥å¿—
- **APIæ–‡æ¡£**: Scalar OpenAPI

### å‰ç«¯æŠ€æœ¯

- **æ¡†æ¶**: React 19.1.0 + TypeScript
- **UIç»„ä»¶**: Ant Design 5.25.3
- **è·¯ç”±**: React Router DOM 7.6.1
- **çŠ¶æ€ç®¡ç†**: Zustand 5.0.5
- **æ ·å¼**: Styled Components 6.1.18
- **æ„å»ºå·¥å…·**: Vite 6.3.5

### æ ¸å¿ƒä¾èµ–

- **AIæ¨¡å‹é›†æˆ**: OpenAI API å…¼å®¹æ¥å£
- **å®æ—¶é€šä¿¡**: Server-Sent Events (SSE)
- **æ•°æ®å­˜å‚¨**: IndexedDB (å®¢æˆ·ç«¯ç¼“å­˜)
- **å¯Œæ–‡æœ¬ç¼–è¾‘**: TipTap ç¼–è¾‘å™¨
- **ä»£ç é«˜äº®**: Prism.js + React Syntax Highlighter
- **å›½é™…åŒ–**: React i18next å¤šè¯­è¨€æ”¯æŒ

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- Docker & Docker Compose
- .NET 9.0 SDK (å¼€å‘ç¯å¢ƒ)
- Node.js 18+ (å¼€å‘ç¯å¢ƒ)

### ğŸš€ å¿«é€Ÿå¼€å§‹

1. å…‹éš†é¡¹ç›®
   
```bash
git clone https://github.com/AIDotNet/auto-prompt.git
cd auto-prompt
```

2. ä½¿ç”¨ Docker Compose éƒ¨ç½²

```bash
# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

3. è®¿é—®åº”ç”¨

- å‰ç«¯ç•Œé¢: http://localhost:10426
- APIæ–‡æ¡£: http://localhost:10426/scalar/v1

### ğŸ” é»˜è®¤è´¦æˆ·ä¿¡æ¯

é¦–æ¬¡éƒ¨ç½²åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ï¼š

- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`

**å®‰å…¨æé†’**ï¼šä¸ºç¡®ä¿ç³»ç»Ÿå®‰å…¨ï¼Œè¯·åœ¨é¦–æ¬¡ç™»å½•ååŠæ—¶ä¿®æ”¹é»˜è®¤å¯†ç ã€‚

æ‚¨å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è‡ªå®šä¹‰é»˜è®¤è´¦æˆ·ï¼š

```yaml
environment:
  - DEFAULT_USERNAME=your_admin_username
  - DEFAULT_PASSWORD=your_secure_password
```

### ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®

1. åç«¯å¼€å‘

```bash
cd src/Console.Service
dotnet restore
dotnet run
```

2. å‰ç«¯å¼€å‘

```bash
cd web
npm install
npm run dev
```

### ğŸŒ ç¯å¢ƒå˜é‡é…ç½®

åœ¨ `src/Console.Service/appsettings.json` ä¸­é…ç½®ï¼š

```json
{
  "OpenAIEndpoint": "https://api.openai.com/v1",
  "CHAT_MODEL": "gpt-4,gpt-3.5-turbo,claude-3-sonnet",
  "IMAGE_GENERATION_MODEL": "dall-e-3,midjourney,stable-diffusion",
  "DEFAULT_CHAT_MODEL": "gpt-4",
  "DEFAULT_IMAGE_GENERATION_MODEL": "dall-e-3",
  "GenerationChatModel": "gpt-4",
  "ConnectionStrings": {
    "Type": "postgresql",
    "Default": "Host=localhost;Database=prompt_db;Username=postgres;Password=your_password"
  }
}
```

### ğŸ“– è¯¦ç»†éƒ¨ç½²æ–‡æ¡£

å¦‚éœ€äº†è§£å®Œæ•´çš„éƒ¨ç½²é…ç½®é€‰é¡¹ã€è‡ªå®šä¹‰ç«¯ç‚¹é…ç½®ã€æ•…éšœæ’é™¤ç­‰è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒï¼š

**[ğŸ“‹ å®Œæ•´éƒ¨ç½²æŒ‡å— (DEPLOYMENT.md)](./DEPLOYMENT.md)**

è¯¥æ–‡æ¡£åŒ…å«ï¼š

- ğŸ”§ è‡ªå®šä¹‰AI APIç«¯ç‚¹é…ç½®
- ğŸ“¦ å¤šç§éƒ¨ç½²é…ç½®é€‰é¡¹ï¼ˆSQLiteã€PostgreSQLã€Ollamaç­‰ï¼‰
- ğŸš€ è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ä½¿ç”¨è¯´æ˜
- â“ å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ
- ğŸ”§ ç»´æŠ¤ç®¡ç†æŒ‡å—
- ğŸ”’ å®‰å…¨é…ç½®å»ºè®®

### ğŸ”§ å¿«é€Ÿé…ç½®ç¤ºä¾‹

#### ä½¿ç”¨è‡ªå®šä¹‰APIç«¯ç‚¹

```yaml
services:
  console-service:
    environment:
      - OpenAIEndpoint=https://your-custom-api.com/v1
      - CHAT_MODEL=gpt-4,gpt-3.5-turbo,claude-3-sonnet
      - IMAGE_GENERATION_MODEL=dall-e-3,midjourney
      - DEFAULT_CHAT_MODEL=gpt-4
      - DEFAULT_IMAGE_GENERATION_MODEL=dall-e-3
      - GenerationChatModel=gpt-4
      - ConnectionStrings:Type=sqlite
      - ConnectionStrings:Default=Data Source=/data/ConsoleService.db
```

#### ä½¿ç”¨æœ¬åœ°Ollama
```yaml
services:
  console-service:
    environment:
      - OpenAIEndpoint=http://ollama:11434/v1
      - CHAT_MODEL=llama2,codellama,mistral
      - DEFAULT_CHAT_MODEL=qwen2.5-coder-32b
      - GenerationChatModel=qwen2.5-coder-32b
  ollama:
    image: ollama/ollama:latest
    ports:
      - "11434:11434"
```

### ğŸ”§ Development Environment Setup

1. Backend Development

```bash
cd src/Console.Service
dotnet restore
dotnet run
```

2. Frontend Development

```bash
cd web
npm install
npm run dev
```

### ğŸŒ Environment Variable Configuration

Configure in `src/Console.Service/appsettings.json`:

```json
{
  "OpenAIEndpoint": "https://api.openai.com/v1",
  "CHAT_MODEL": "gpt-4,gpt-3.5-turbo,claude-3-sonnet",
  "IMAGE_GENERATION_MODEL": "dall-e-3,midjourney,stable-diffusion",
  "DEFAULT_CHAT_MODEL": "gpt-4",
  "DEFAULT_IMAGE_GENERATION_MODEL": "dall-e-3",
  "GenerationChatModel": "gpt-4",
  "ConnectionStrings": {
    "Type": "postgresql",
    "Default": "Host=localhost;Database=prompt_db;Username=postgres;Password=your_password"
  }
}
```

### ğŸ”§ è‡ªå®šä¹‰ç«¯ç‚¹é…ç½®

æœ¬å¹³å°æ”¯æŒé…ç½®è‡ªå®šä¹‰çš„AI APIç«¯ç‚¹ï¼Œå…¼å®¹OpenAI APIæ ¼å¼çš„æœåŠ¡ã€‚

#### é…ç½®æ–¹å¼

##### 1. é€šè¿‡é…ç½®æ–‡ä»¶é…ç½®ï¼ˆæ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰

åœ¨ `src/Console.Service/appsettings.json` ä¸­é…ç½®ï¼š

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "OpenAIEndpoint": "https://your-custom-api.com/v1",
  "ConnectionStrings": {
    "Type": "sqlite",
    "Default": "Data Source=/data/ConsoleService.db"
  }
}
```

##### 2. é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®

```bash
export OPENAIENDPOINT="https://your-custom-api.com/v1"
```

##### 3. Docker Compose ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»ºæˆ–ä¿®æ”¹ `docker-compose.yaml`ï¼š

```yaml
services:
  console-service:
    image: registry.cn-shenzhen.aliyuncs.com/tokengo/console
    ports:
      - 10426:8080
    environment:
      - TZ=Asia/Shanghai
      - OpenAIEndpoint=https://your-custom-api.com/v1
      # AIæ¨¡å‹é…ç½®
      - CHAT_MODEL=gpt-4,gpt-3.5-turbo,claude-3-sonnet
      - IMAGE_GENERATION_MODEL=dall-e-3,midjourney,stable-diffusion
      - DEFAULT_CHAT_MODEL=gpt-4
      - DEFAULT_IMAGE_GENERATION_MODEL=dall-e-3
      - GenerationChatModel=gpt-4
      # æ•°æ®åº“é…ç½®
      - ConnectionStrings:Type=sqlite
      - ConnectionStrings:Default=Data Source=/data/ConsoleService.db
    volumes:
      - ./data:/app/data
    build:
      context: .
      dockerfile: src/Console.Service/Dockerfile
```

#### æ–°å¢ç¯å¢ƒå˜é‡è¯¦ç»†è¯´æ˜

##### AIæ¨¡å‹é…ç½®å˜é‡

- **`CHAT_MODEL`**: é…ç½®å¹³å°æ”¯æŒçš„èŠå¤©æ¨¡å‹åˆ—è¡¨ï¼Œå¤šä¸ªæ¨¡å‹ç”¨é€—å·åˆ†éš”ã€‚ç”¨æˆ·åœ¨å‰ç«¯ç•Œé¢å¯ä»¥ä»è¿™äº›æ¨¡å‹ä¸­é€‰æ‹©ã€‚
- **`IMAGE_GENERATION_MODEL`**: é…ç½®å¹³å°æ”¯æŒçš„å›¾åƒç”Ÿæˆæ¨¡å‹åˆ—è¡¨ï¼Œå¤šä¸ªæ¨¡å‹ç”¨é€—å·åˆ†éš”ã€‚
- **`DEFAULT_CHAT_MODEL`**: è®¾ç½®é»˜è®¤çš„èŠå¤©æ¨¡å‹ï¼Œå½“ç”¨æˆ·æ²¡æœ‰ç‰¹åˆ«æŒ‡å®šæ—¶ä½¿ç”¨æ­¤æ¨¡å‹ã€‚
- **`DEFAULT_IMAGE_GENERATION_MODEL`**: è®¾ç½®é»˜è®¤çš„å›¾åƒç”Ÿæˆæ¨¡å‹ã€‚
- **`GenerationChatModel`**: ä¸“é—¨ç”¨äºæç¤ºè¯ä¼˜åŒ–å’Œç”ŸæˆåŠŸèƒ½çš„èŠå¤©æ¨¡å‹ã€‚

#### æ”¯æŒçš„APIç«¯ç‚¹ç±»å‹

å¹³å°æ”¯æŒä»¥ä¸‹å…¼å®¹OpenAI APIæ ¼å¼çš„æœåŠ¡ï¼š

- **OpenAI å®˜æ–¹API**: `https://api.openai.com/v1`
- **Azure OpenAI**: `https://your-resource.openai.azure.com/openai/deployments/your-deployment`
- **å›½å†…ä»£ç†æœåŠ¡**: 
  - `https://api.token-ai.cn/v1` (é»˜è®¤)
  - `https://api.deepseek.com/v1`
  - `https://api.moonshot.cn/v1`
- **è‡ªéƒ¨ç½²æœåŠ¡**:
  - Ollama: `http://localhost:11434/v1`
  - LocalAI: `http://localhost:8080/v1`
  - vLLM: `http://localhost:8000/v1`

#### å®Œæ•´çš„Docker Composeé…ç½®ç¤ºä¾‹

##### åŸºç¡€é…ç½®ï¼ˆSQLiteæ•°æ®åº“ï¼‰

```yaml
version: '3.8'

services:
  console-service:
    image: registry.cn-shenzhen.aliyuncs.com/tokengo/console
    container_name: auto-prompt
    ports:
      - "10426:8080"
    environment:
      - TZ=Asia/Shanghai
      - DEFAULT_USERNAME=admin
      - DEFAULT_PASSWORD=admin123
      - OpenAIEndpoint=https://api.openai.com/v1
      - CHAT_MODEL=gpt-4,gpt-3.5-turbo,claude-3-sonnet
      - IMAGE_GENERATION_MODEL=dall-e-3,midjourney,stable-diffusion
      - DEFAULT_CHAT_MODEL=gpt-4
      - DEFAULT_IMAGE_GENERATION_MODEL=dall-e-3
      - GenerationChatModel=gpt-4
      - ConnectionStrings:Type=sqlite
      - ConnectionStrings:Default=Data Source=/data/ConsoleService.db
    volumes:
      - ./data:/app/data
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/health"]
      interval: 30s
      timeout: 10s
      retries: 3
```

##### é«˜çº§é…ç½®ï¼ˆPostgreSQLæ•°æ®åº“ï¼‰

```yaml
version: '3.8'

services:
  console-service:
    image: registry.cn-shenzhen.aliyuncs.com/tokengo/console
    container_name: auto-prompt
    ports:
      - "10426:8080"
    environment:
      - TZ=Asia/Shanghai
      - DEFAULT_USERNAME=admin
      - DEFAULT_PASSWORD=admin123
      - OpenAIEndpoint=https://your-custom-api.com/v1
      - CHAT_MODEL=gpt-4,gpt-3.5-turbo,claude-3-sonnet
      - IMAGE_GENERATION_MODEL=dall-e-3,midjourney,stable-diffusion
      - DEFAULT_CHAT_MODEL=gpt-4
      - DEFAULT_IMAGE_GENERATION_MODEL=dall-e-3
      - GenerationChatModel=gpt-4
      - ConnectionStrings:Type=postgresql
      - ConnectionStrings:Default=Host=postgres;Database=auto_prompt;Username=postgres;Password=your_password
    depends_on:
      - postgres
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  postgres:
    image: postgres:16-alpine
    container_name: auto-prompt-db
    environment:
      - POSTGRES_DB=auto_prompt
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=your_password
      - TZ=Asia/Shanghai
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 10s
      timeout: 5s
      retries: 5

volumes:
  postgres_data:
```

##### æœ¬åœ°AIæœåŠ¡é…ç½®ï¼ˆOllamaï¼‰

```yaml
version: '3.8'

services:
  console-service:
    image: registry.cn-shenzhen.aliyuncs.com/tokengo/console
    container_name: auto-prompt
    ports:
      - "10426:8080"
    environment:
      - TZ=Asia/Shanghai
      - DEFAULT_USERNAME=admin
      - DEFAULT_PASSWORD=admin123
      - OpenAIEndpoint=http://ollama:11434/v1
      - CHAT_MODEL=llama2,codellama,mistral
      - IMAGE_GENERATION_MODEL=stable-diffusion
      - DEFAULT_CHAT_MODEL=llama2
      - DEFAULT_IMAGE_GENERATION_MODEL=stable-diffusion
      - GenerationChatModel=llama2
      - ConnectionStrings:Type=sqlite
      - ConnectionStrings:Default=Data Source=/data/ConsoleService.db
    volumes:
      - ./data:/app/data
    depends_on:
      - ollama
    restart: unless-stopped

  ollama:
    image: ollama/ollama:latest
    container_name: ollama
    ports:
      - "11434:11434"
    volumes:
      - ollama_data:/root/.ollama
    environment:
      - OLLAMA_HOST=0.0.0.0
    restart: unless-stopped
    # å¦‚æœæœ‰GPUï¼Œå–æ¶ˆæ³¨é‡Šä»¥ä¸‹é…ç½®
    # deploy:
    #   resources:
    #     reservations:
    #       devices:
    #         - driver: nvidia
    #           count: 1
    #           capabilities: [gpu]

volumes:
  ollama_data:
```

#### éƒ¨ç½²æ­¥éª¤

1. **é€‰æ‹©é…ç½®æ¨¡æ¿**
   
   æ ¹æ®æ‚¨çš„éœ€æ±‚é€‰æ‹©ä¸Šè¿°é…ç½®æ¨¡æ¿ä¹‹ä¸€ï¼Œä¿å­˜ä¸º `docker-compose.yaml`

2. **ä¿®æ”¹é…ç½®å‚æ•°**
   
   ```bash
   # ä¿®æ”¹APIç«¯ç‚¹
   - OpenAIEndpoint=https://your-api-endpoint.com/v1
   
   # ä¿®æ”¹æ•°æ®åº“å¯†ç ï¼ˆå¦‚ä½¿ç”¨PostgreSQLï¼‰
   - POSTGRES_PASSWORD=your_secure_password
   - ConnectionStrings:Default=Host=postgres;Database=auto_prompt;Username=postgres;Password=your_secure_password
   ```

3. **å¯åŠ¨æœåŠ¡**
   
   ```bash
   # å¯åŠ¨æ‰€æœ‰æœåŠ¡
   docker-compose up -d
   
   # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
   docker-compose ps
   
   # æŸ¥çœ‹æ—¥å¿—
   docker-compose logs -f console-service
   ```

4. **éªŒè¯éƒ¨ç½²**
   
   ```bash
   # æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€
   curl http://localhost:10426/health
   
   # è®¿é—®APIæ–‡æ¡£
   curl http://localhost:10426/scalar/v1
   ```

#### ç¯å¢ƒå˜é‡è¯´æ˜

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|--------|------|--------|------|
| `OpenAIEndpoint` | AI APIç«¯ç‚¹åœ°å€ | `https://api.token-ai.cn/v1` | `https://api.openai.com/v1` |
| `CHAT_MODEL` | å¯ç”¨çš„èŠå¤©æ¨¡å‹åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ | `gpt-4.1,o4-mini,claude-sonnet-4-20250514,claude-3-7-sonnet` | `gpt-4,gpt-3.5-turbo,claude-3-sonnet` |
| `IMAGE_GENERATION_MODEL` | å¯ç”¨çš„å›¾åƒç”Ÿæˆæ¨¡å‹åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ | `gpt-image-1,dall-e-3,imagen4` | `dall-e-3,midjourney,stable-diffusion` |
| `DEFAULT_CHAT_MODEL` | é»˜è®¤èŠå¤©æ¨¡å‹ | `gpt-4.1-mini` | `gpt-4` |
| `DEFAULT_IMAGE_GENERATION_MODEL` | é»˜è®¤å›¾åƒç”Ÿæˆæ¨¡å‹ | `gpt-4.1` | `dall-e-3` |
| `GenerationChatModel` | æç¤ºè¯ç”Ÿæˆä½¿ç”¨çš„èŠå¤©æ¨¡å‹ | `gpt-4.1-mini` | `gpt-4` |
| `DEFAULT_USERNAME` | é»˜è®¤ç®¡ç†å‘˜ç”¨æˆ·å | `admin` | `admin`, `root`, `administrator` |
| `DEFAULT_PASSWORD` | é»˜è®¤ç®¡ç†å‘˜å¯†ç  | `admin123` | `your_secure_password` |
| `Jwt:Key` | JWTå¯†é’¥ | è‡ªåŠ¨ç”Ÿæˆçš„é»˜è®¤å¯†é’¥ | `your_secret_key_here` |
| `Jwt:Issuer` | JWTå‘è¡Œè€… | `prompt-console` | `your-app-name` |
| `Jwt:Audience` | JWTå—ä¼— | `prompt-console-users` | `your-app-users` |
| `ConnectionStrings:Type` | æ•°æ®åº“ç±»å‹ | `sqlite` | `postgresql`, `sqlite` |
| `ConnectionStrings:Default` | æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸² | `Data Source=/data/ConsoleService.db` | PostgreSQL: `Host=postgres;Database=auto_prompt;Username=postgres;Password=password` |
| `TZ` | æ—¶åŒºè®¾ç½® | `Asia/Shanghai` | `UTC`, `America/New_York` |

#### æ•…éšœæ’é™¤

##### å¸¸è§é—®é¢˜

1. **APIç«¯ç‚¹è¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥ç«¯ç‚¹æ˜¯å¦å¯è®¿é—®
   curl -I https://your-api-endpoint.com/v1/models
   
   # æ£€æŸ¥å®¹å™¨ç½‘ç»œ
   docker-compose exec console-service curl -I http://ollama:11434/v1/models
   ```

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥PostgreSQLå®¹å™¨çŠ¶æ€
   docker-compose logs postgres
   
   # æµ‹è¯•æ•°æ®åº“è¿æ¥
   docker-compose exec postgres psql -U postgres -d auto_prompt -c "SELECT 1;"
   ```

3. **æƒé™é—®é¢˜**
   ```bash
   # ç¡®ä¿æ•°æ®ç›®å½•æƒé™æ­£ç¡®
   sudo chown -R 1000:1000 ./data
   chmod 755 ./data
   ```

##### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
docker-compose logs -f console-service

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker-compose logs -f postgres

# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs -f
```

#### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **èµ„æºé™åˆ¶é…ç½®**
   ```yaml
   services:
     console-service:
       deploy:
         resources:
           limits:
             memory: 2G
             cpus: '1.0'
           reservations:
             memory: 512M
             cpus: '0.5'
   ```

2. **æ•°æ®åº“ä¼˜åŒ–**
   ```yaml
   postgres:
     environment:
       - POSTGRES_SHARED_PRELOAD_LIBRARIES=pg_stat_statements
       - POSTGRES_MAX_CONNECTIONS=200
     command: >
       postgres
       -c shared_preload_libraries=pg_stat_statements
       -c max_connections=200
       -c shared_buffers=256MB
       -c effective_cache_size=1GB
   ```

3. **ç¼“å­˜é…ç½®**
   ```yaml
   services:
     redis:
       image: redis:7-alpine
       container_name: auto-prompt-redis
       ports:
         - "6379:6379"
       volumes:
         - redis_data:/data
       restart: unless-stopped
   ```
   
## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
auto-prompt/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ Console.Service/          # åç«¯æœåŠ¡
â”‚       â”œâ”€â”€ Controllers/          # APIæ§åˆ¶å™¨
â”‚       â”œâ”€â”€ Services/             # ä¸šåŠ¡æœåŠ¡
â”‚       â”œâ”€â”€ Entities/             # æ•°æ®å®ä½“
â”‚       â”œâ”€â”€ Dto/                  # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚       â”œâ”€â”€ DbAccess/             # æ•°æ®è®¿é—®å±‚
â”‚       â”œâ”€â”€ plugins/              # AIæ’ä»¶é…ç½®
â”‚       â”‚   â””â”€â”€ Generate/         # æç¤ºè¯ç”Ÿæˆæ’ä»¶
â”‚       â”‚       â”œâ”€â”€ DeepReasoning/           # æ·±åº¦æ¨ç†
â”‚       â”‚       â”œâ”€â”€ DeepReasoningPrompt/     # æ·±åº¦æ¨ç†æç¤ºè¯
â”‚       â”‚       â””â”€â”€ OptimizeInitialPrompt/   # åˆå§‹ä¼˜åŒ–
â”‚       â””â”€â”€ Migrations/           # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ web/                          # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/           # Reactç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ GeneratePrompt/   # æç¤ºè¯ç”Ÿæˆç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Workbench/        # å·¥ä½œå°
â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardPage/    # ä»ªè¡¨æ¿
â”‚   â”‚   â”‚   â””â”€â”€ PromptsPage/      # æç¤ºè¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ stores/               # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ api/                  # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ styles/               # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ public/                   # é™æ€èµ„æº
â”‚   â””â”€â”€ dist/                     # æ„å»ºè¾“å‡º
â”œâ”€â”€ docker-compose.yaml           # Dockerç¼–æ’é…ç½®
â””â”€â”€ README.md                     # é¡¹ç›®æ–‡æ¡£
```

## ğŸ® ä½¿ç”¨æŒ‡å—

### 1. æç¤ºè¯ä¼˜åŒ–

1. åœ¨å·¥ä½œå°ä¸­è¾“å…¥éœ€è¦ä¼˜åŒ–çš„æç¤ºè¯
2. æè¿°å…·ä½“éœ€æ±‚å’ŒæœŸæœ›æ•ˆæœ
3. é€‰æ‹©æ˜¯å¦å¯ç”¨æ·±åº¦æ¨ç†æ¨¡å¼
4. ç‚¹å‡»"ç”Ÿæˆ"å¼€å§‹ä¼˜åŒ–è¿‡ç¨‹
5. æŸ¥çœ‹ä¼˜åŒ–ç»“æœå’Œæ¨ç†è¿‡ç¨‹

### 2. æ¨¡æ¿ç®¡ç†

1. å°†ä¼˜åŒ–åçš„æç¤ºè¯ä¿å­˜ä¸ºæ¨¡æ¿
2. æ·»åŠ æ ‡é¢˜ã€æè¿°å’Œæ ‡ç­¾
3. åœ¨"æˆ‘çš„æç¤ºè¯"ä¸­ç®¡ç†ä¸ªäººæ¨¡æ¿
4. æ”¯æŒç¼–è¾‘ã€åˆ é™¤ã€æ”¶è—ç­‰æ“ä½œ

### 3. ç¤¾åŒºåˆ†äº«

1. åœ¨æç¤ºè¯å¹¿åœºæµè§ˆçƒ­é—¨æ¨¡æ¿
2. ä½¿ç”¨æœç´¢åŠŸèƒ½æŸ¥æ‰¾ç‰¹å®šç±»å‹æ¨¡æ¿
3. ç‚¹èµã€æ”¶è—æ„Ÿå…´è¶£çš„æ¨¡æ¿
4. åˆ†äº«è‡ªå·±çš„ä¼˜è´¨æ¨¡æ¿ç»™ç¤¾åŒº

### 4. è¯­è¨€åˆ‡æ¢

1. ç‚¹å‡»å³ä¸Šè§’æˆ–ä¾§è¾¹æ çš„è¯­è¨€åˆ‡æ¢æŒ‰é’®ï¼ˆğŸŒï¼‰
2. é€‰æ‹©æ‚¨åå¥½çš„è¯­è¨€ï¼ˆä¸­æ–‡/è‹±æ–‡ï¼‰
3. ç•Œé¢å°†ç«‹å³åˆ‡æ¢è¯­è¨€ï¼Œæ— éœ€åˆ·æ–°é¡µé¢
4. æ‚¨çš„è¯­è¨€åå¥½å°†è¢«ä¿å­˜ï¼Œä¸‹æ¬¡è®¿é—®æ—¶è‡ªåŠ¨åº”ç”¨

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. **Fork é¡¹ç›®**åˆ°ä½ çš„GitHubè´¦æˆ·
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**: `git checkout -b feature/AmazingFeature`
3. **æäº¤æ›´æ”¹**: `git commit -m 'Add some AmazingFeature'`
4. **æ¨é€åˆ†æ”¯**: `git push origin feature/AmazingFeature`
5. **åˆ›å»º Pull Request**

### å¼€å‘è§„èŒƒ

- éµå¾ªç°æœ‰ä»£ç é£æ ¼å’Œå‘½åçº¦å®š
- æ·»åŠ é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
- æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ **LGPL (Lesser General Public License)** å¼€æºåè®®ã€‚

### è®¸å¯æ¡æ¬¾

- âœ… **å•†ä¸šä½¿ç”¨**: å…è®¸åœ¨å•†ä¸šç¯å¢ƒä¸­éƒ¨ç½²å’Œä½¿ç”¨
- âœ… **åˆ†å‘**: å…è®¸åˆ†å‘åŸå§‹ä»£ç å’ŒäºŒè¿›åˆ¶æ–‡ä»¶
- âœ… **ä¿®æ”¹**: å…è®¸ä¿®æ”¹æºä»£ç ç”¨äºä¸ªäººæˆ–å†…éƒ¨ä½¿ç”¨
- âŒ **ä¿®æ”¹åå•†ç”¨**: ç¦æ­¢ä¿®æ”¹æºä»£ç åç”¨äºå•†ä¸šåˆ†å‘
- âš ï¸ **è´£ä»»**: ä½¿ç”¨æœ¬è½¯ä»¶çš„é£é™©ç”±ç”¨æˆ·è‡ªè¡Œæ‰¿æ‹…

### é‡è¦è¯´æ˜

- å¯ä»¥ç›´æ¥éƒ¨ç½²æœ¬é¡¹ç›®ç”¨äºå•†ä¸šç”¨é€”
- å¯ä»¥åŸºäºæœ¬é¡¹ç›®å¼€å‘å†…éƒ¨å·¥å…·
- ä¸å¾—ä¿®æ”¹æºä»£ç åé‡æ–°æ‰“åŒ…åˆ†å‘
- å¿…é¡»ä¿ç•™åŸå§‹ç‰ˆæƒå£°æ˜

è¯¦ç»†åè®®æ¡æ¬¾è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæŠ€æœ¯ï¼š

- [Microsoft Semantic Kernel](https://github.com/microsoft/semantic-kernel) - AIç¼–æ’æ¡†æ¶
- [Ant Design](https://ant.design/) - React UIç»„ä»¶åº“
- [React](https://reactjs.org/) - å‰ç«¯æ¡†æ¶
- [.NET](https://dotnet.microsoft.com/) - åç«¯æ¡†æ¶

## ğŸ“ è”ç³»æˆ‘ä»¬

- **é¡¹ç›®ä¸»é¡µ**: https://github.com/AIDotNet/auto-prompt
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/AIDotNet/auto-prompt/issues)
- **å®˜æ–¹ç½‘ç«™**: https://token-ai.cn
- **æŠ€æœ¯æ”¯æŒ**: é€šè¿‡GitHub Issuesæäº¤

---
## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=AIDotNet/auto-prompt&type=Date)](https://www.star-history.com/#AIDotNet/auto-prompt&Date)


## ğŸ’ŒWeChat

![image](img/wechat.jpg)


<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ Starï¼**

Made with â¤ï¸ by [TokenAI](https://token-ai.cn)

</div> 
